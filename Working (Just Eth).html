<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Thu Feb 27 2020 01:18:31 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e545902eb54f77ae5e6696f" data-wf-site="5e545902eb54f77d39e6696e">
<head>
  <meta charset="utf-8">
  <title>Julio&#x27;s Blank Site</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/julios-blank-site-e50fbc.webflow.css" rel="stylesheet" type="text/css">
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>
<body class="body">
  <div class="section">
    <div class="container w-container">
      <div class="bannerblock w-clearfix">
        <div class="useraddress" id="useraddress">0x-------------------------</div>
	<div class="txstatus1" id="txstatus1">Recent Tx:</div>
      </div>
      <div class="columns w-row">
        <div class="createcolumn w-col w-col-4 w-col-small-small-stack"><a href="#" data-w-id="75edf02e-6359-ab95-ec3e-c88d6cc5cd95" type="button" onclick="settype(this.innerHTML)" class="ercbutton w-button" id="ETH">ETH</a><a href="#" data-w-id="5870a97d-3094-8531-0793-9982b645efd9" type="button" onclick="settype(this.innerHTML)" class="ercbutton w-button" id="ERC">ERC</a>
          <div class="ratetext">Rate:</div>
          <div class="durationtext">Duration:</div>
          <div class="tokentext">Token:</div>
          <div class="suppliedtext">Supplied:</div>
          <div class="w-form">
            <form id="wf-form-inputForm" name="wf-form-inputForm" data-name="inputForm" class="form">
    <input type="text" class="rate-field w-input" maxlength="256" name="Rate" data-name="Rate" placeholder="e.g. 5, 10, etc.," id="Rate" required="">
    <input type="text" class="text-field w-input" maxlength="256" name="Duration" data-name="Duration" placeholder="Duration (sec)" id="Duration" required="">
    <input type="text" class="token-field w-input" maxlength="256" name="Token" data-name="Token" placeholder="Token Address" id="Token">
    <input type="text" class="supplied-field w-input" maxlength="256" name="Supplied" data-name="Supplied" placeholder="# of Tokens" id="Supplied">
    </form>
            <div class="w-form-done">
              <div></div>
            </div>
            <div class="error-message w-form-fail">
              <div></div>
            </div>
          </div><a data-w-id="8f2e2941-366b-9ebc-5ee2-969df2e9f625" type="button" onclick="createoffer()" class="createofferbutton w-button">Create Offer</a>
		  <a href="#" class="authorizebutton1 w-button" type="button" onclick="ercAuthorize('SUPPLY')" id="authorizebutton1">Authorize Token</a></div>
        <div class="offercolumn w-col w-col-4 w-col-small-small-stack">
          <div class="offerdiv">
            <div class="w-layout-grid grid">
              <div id = "activelabel" class="activelabel">Active Offers:</div>
              <div><a href ="#" id = "active1" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active2" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active3" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active4" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active5" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active6" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active7" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active8" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
			  <div><a href ="#" id = "active9" class="offer1" type="button" onclick="loadcontract(this.innerHTML)"></a></div>
            </div>
          </div>
        </div>
        <div class="takecolumn w-col w-col-4 w-col-small-small-stack">
          <div class="div-block-4">
            <div class="selectedoffer" id="selectedoffer">0x-------------------------</div>
          </div>
          <div class="ratetext2">Rate:</div>
          <div class="durationtext2">Duration:</div>
          <div class="tokentext2">Token:</div>
          <div class="suppliedtext2">Supplied:</div>
          <div class="takertext">Taker Stake:</div>
          <div class="stakelabel">
            <div class="contractstake" id ="contractstake"><br>‍</div>
          </div>
          <div class="ratelabel">
            <div class="contractrate" id="contractrate"><br>‍</div>
          </div>
          <div class="durationlabel">
            <div class="contractduration" id="contractduration"><br>‍</div>
          </div>
          <div class="tokenlabel">
            <div class="contractaddress" id="contractaddress"><br>‍</div>
          </div>
          <div class="suppliedlabel">
            <div class="contractsupplied" id="contractsupplied"><br>‍</div>
          </div><a href="#" class="authorizebutton2 w-button" type="button" id= "authorizebutton2" onclick="ercAuthorize('TAKE')">Authorize Token</a>
		  <a data-w-id="01516053-af32-daae-a25d-18c9f4294142" href="#" class="takeofferbutton w-button" id="takeofferbutton" type="button" onclick="takeEthOffer()">Take Offer</a></div>
      </div>
      <div class="activecontracts w-clearfix">
        <div class="contractslabel">Active Contracts:</div>
        <div class="contract1" id="contract1">0x-------------------------</div>
        <div class="contractsize1" id="contractsize1">0.25 Eth</div>
        <div class="contractrate1" id="contractrate1">Rate: 4.5%</div>
		<a href="#" class="releasebutton1 w-button" type="button" onclick="releaseEthContract(1)">Release</a>
		<a href="#" class="releasebutton2 w-button" type="button" onclick="releaseEthContract(2)">Release</a>
		<a href="#" class="releasebutton2-copy w-button" type="button" onclick="releaseEthContract(3)">Release</a>
        <div class="contract2" id="contract2">0x-------------------------</div>
        <div class="contractsize2" id="contractsize2">0.25 Eth</div>
        <div class="contractrate2" id="contractrate2">Rate: 4.5%</div>
        <div class="contract3" id="contract3">0x-------------------------</div>
        <div class="contractsize3" id="contractsize3">0.25 Eth</div>
        <div class="contractrate3" id="contractrate3">Rate: 4.5%</div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src ="js/test.js"></script>
  <script src="js/web3.min.js"></script>
<script>
/// Set token type to ERC or ETH
function settype(type) {
window.tokentype = type;
}

/// create offer for either ERC or ETH
function createoffer () {
if (window.tokentype == 'ETH') {
createEthOffer()
} else if (window.tokentype == 'ERC')
createErcOffer()
else {
}
}

///connect to web3 & get default account address
function getAccounts(callback) {
    web3.eth.getAccounts((error,result) => {
        if (error) {
            console.log(error);
        } else {
            callback(result);
        }
    });
}

 // Wait for loading completion to avoid race conditions with web3 injection timing.
  if (window.ethereum) {
      const web3 = new Web3(window.ethereum);
      window.ethereum.enable();}
      account = getAccounts(function(result) {
      document.getElementById("useraddress").innerHTML = result[0];
});

/// Release Eth Funds
function releaseEthContract(buttonnumber) {
var ABI = [
	{
		"constant": false,
		"inputs": [],
		"name": "abort",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "bondRelease",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "takeOffer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "contractOfferer",
				"type": "address"
			},
			{
				"name": "fixRate",
				"type": "uint256"
			},
			{
				"name": "termDuration",
				"type": "uint256"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "Aborted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			}
		],
		"name": "OfferConfirmed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "termEnded",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "divided",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "duration",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "interest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lockTime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "offerer",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "rate",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "state",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "taker",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "value",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
var address = window.lockedContracts[(buttonnumber-1)].contractAddress;
var lendEthContract = web3.eth.contract(ABI).at(address);
var currentaddress = document.getElementById("useraddress").innerHTML;
lendEthContract.bondRelease({  
  from: currentaddress,   
  gas: "200000",   
  value: "",   
  data: "" },  function(error, result){
    if(!error)
		document.getElementById("txstatus1").innerHTML = 'Tx:' + JSON.stringify(result);
    else
        console.error(error);
})
}
/// Take an offer for ETH
function takeEthOffer() {
var ABI = [
	{
		"constant": false,
		"inputs": [],
		"name": "abort",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "bondRelease",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "takeOffer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "contractOfferer",
				"type": "address"
			},
			{
				"name": "fixRate",
				"type": "uint256"
			},
			{
				"name": "termDuration",
				"type": "uint256"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "Aborted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			}
		],
		"name": "OfferConfirmed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "termEnded",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "divided",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "duration",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "interest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lockTime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "offerer",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "rate",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "state",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "taker",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "value",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
///instantiate contract + take offer
var address = document.getElementById("selectedoffer").innerHTML;
var lendEthContract = web3.eth.contract(ABI).at(address);
var currentaddress = document.getElementById("useraddress").innerHTML;
var currentstake = Math.ceil(window.currentcontractstake);
lendEthContract.takeOffer({  
  from: currentaddress,   
  gas: "200000",   
  value: currentstake,   
  data: "" },  function(error, result){
    if(!error)
		document.getElementById("txstatus1").innerHTML = 'Tx:' + JSON.stringify(result);
    else
        console.error(error);
})
}

///creates eth offer with parameters
function createEthOffer() {
var ABI = [
	{
		"constant": true,
		"inputs": [
			{
				"name": "pos",
				"type": "uint256"
			}
		],
		"name": "seeLend",
		"outputs": [
			{
				"name": "contractAddress",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastContractAddress",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "contracts",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getContractCount",
		"outputs": [
			{
				"name": "contractCount",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			},
			{
				"name": "erc20Contract",
				"type": "address"
			},
			{
				"name": "cEr20Contract",
				"type": "address"
			},
			{
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newErc20Contract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			}
		],
		"name": "newEthContract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "newLendEthContract",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newLendErcContract",
		"type": "event"
	}
];
///instantiate offercontract, deploy new eth contract using offercontract methods
var address = '0x472f284e02f93ffc99FD10f89D718ba4472AC5d0';
var offerContract = web3.eth.contract(ABI).at(address);
var currentaddress = document.getElementById("useraddress").value;
var rate = document.getElementById("Rate").value;
var duration = document.getElementById("Duration").value;

var supplied = (Number(document.getElementById("Supplied").value)*1000000000000000000);
offerContract.newEthContract(rate,duration,{  
  from: currentaddress,   
  gas: "700000",   
  value: supplied,   
  data: "" },  function(error, result){
    if(!error)
		document.getElementById("txstatus1").innerHTML = 'Tx:' + JSON.stringify(result);
    else
        console.error(error);
})
}
///creates eth offer with parameters
function createErcOffer() {
var offercontractABI = [
	{
		"constant": true,
		"inputs": [
			{
				"name": "pos",
				"type": "uint256"
			}
		],
		"name": "seeLend",
		"outputs": [
			{
				"name": "contractAddress",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastContractAddress",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "contracts",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getContractCount",
		"outputs": [
			{
				"name": "contractCount",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			},
			{
				"name": "erc20Contract",
				"type": "address"
			},
			{
				"name": "cEr20Contract",
				"type": "address"
			},
			{
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newErc20Contract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			}
		],
		"name": "newEthContract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "newLendEthContract",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newLendErcContract",
		"type": "event"
	}
];
///instantiate offercontract, deploy new eth contract using offercontract methods
var address = '0x472f284e02f93ffc99FD10f89D718ba4472AC5d0';
var offerContract = web3.eth.contract(offercontractABI).at(address);
var currentaddress = document.getElementById("useraddress").value;
var rate = document.getElementById("Rate").value;
var duration = document.getElementById("Duration").value;
var supplied = document.getElementById("Supplied").value;
var cerc20address= '0x6ce27497a64fffb5517aa4aee908b1e7eb63b9ff'
var erc20address = '0xad6d458402f60fd3bd25163575031acdce07538d';
offerContract.newErc20Contract(rate,duration, erc20address, cerc20address, supplied, {  
  from: currentaddress,   
  gas: "700000",   
  value: "",   
  data: "" },  function(error, result){
    if(!error)
		document.getElementById("txstatus1").innerHTML = 'Tx:' + JSON.stringify(result);
    else
        console.error(error);
})
}




var ABI = [
	{
		"constant": true,
		"inputs": [
			{
				"name": "pos",
				"type": "uint256"
			}
		],
		"name": "seeLend",
		"outputs": [
			{
				"name": "contractAddress",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lastContractAddress",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"name": "contracts",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getContractCount",
		"outputs": [
			{
				"name": "contractCount",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			},
			{
				"name": "erc20Contract",
				"type": "address"
			},
			{
				"name": "cEr20Contract",
				"type": "address"
			},
			{
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newErc20Contract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "rate",
				"type": "uint256"
			},
			{
				"name": "duration",
				"type": "uint256"
			}
		],
		"name": "newEthContract",
		"outputs": [
			{
				"name": "newLendContract",
				"type": "address"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "newLendEthContract",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "duration",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "tokenNumber",
				"type": "uint256"
			}
		],
		"name": "newLendErcContract",
		"type": "event"
	}
];

/// setup watcher for eth bond release
function setupreleasedeth (watchedaddress) {
var address = watchedaddress;
var ethcontractABI = [
	{
		"constant": false,
		"inputs": [],
		"name": "abort",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "bondRelease",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "takeOffer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "contractOfferer",
				"type": "address"
			},
			{
				"name": "fixRate",
				"type": "uint256"
			},
			{
				"name": "termDuration",
				"type": "uint256"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "Aborted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			}
		],
		"name": "OfferConfirmed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "termEnded",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "divided",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "duration",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "interest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lockTime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "offerer",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "rate",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "state",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "taker",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "value",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
var lendEthContract = web3.eth.contract(ethcontractABI).at(address);
lendEthContract.termEnded().watch ( (err, response) => {
		var resp = response.args;
		var index  = window.lockedContracts.findIndex(x => x.contractAddress === address);
		window.lockedContracts.splice(index, 1);
		try {document.getElementById("contract1").innerHTML = window.lockedContracts[0].contractAddress;}
		catch (e) {document.getElementById("contract1").innerHTML = "";}
		try {document.getElementById("contractrate1").innerHTML = 'Rate: ' + window.lockedContracts[0].rate; + '%'}
		catch (e) {document.getElementById("contractrate1").innerHTML = "";}
		try {document.getElementById("contractsize1").innerHTML = window.lockedContracts[0].size; + ' ETH'}
		catch (e) {document.getElementById("contractsize1").innerHTML = "";}
		try {document.getElementById("contract2").innerHTML = window.lockedContracts[1].contractAddress;}
		catch (e) {document.getElementById("contract2").innerHTML = "";}
		try {document.getElementById("contractrate2").innerHTML = 'Rate: ' + window.lockedContracts[1].rate; + '%'}
		catch (e) {document.getElementById("contractrate2").innerHTML = "";}
		try {document.getElementById("contractsize2").innerHTML = window.lockedContracts[1].size; + ' ETH'}
		catch (e) {document.getElementById("contractsize2").innerHTML = "";}
		try {document.getElementById("contract3").innerHTML = window.lockedContracts[2].contractAddress;}
		catch (e) {document.getElementById("contract3").innerHTML = "";}
		try {document.getElementById("contractrate3").innerHTML = 'Rate: ' + window.lockedContracts[2].rate; + '%'}
		catch (e) {document.getElementById("contractrate3").innerHTML = "";}
		try {document.getElementById("contractsize3").innerHTML = window.lockedContracts[2].size; + ' ETH'}
		catch (e) {document.getElementById("contractsize3").innerHTML = "";}
		});
		}
/// listen for eth contract abort
function setupabortwatcher(watchedaddress){
var address = watchedaddress;
var ethcontractABI = [
	{
		"constant": false,
		"inputs": [],
		"name": "abort",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "bondRelease",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "takeOffer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "contractOfferer",
				"type": "address"
			},
			{
				"name": "fixRate",
				"type": "uint256"
			},
			{
				"name": "termDuration",
				"type": "uint256"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "Aborted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			}
		],
		"name": "OfferConfirmed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "termEnded",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "divided",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "duration",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "interest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lockTime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "offerer",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "rate",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "state",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "taker",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "value",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
var lendEthContract = web3.eth.contract(ethcontractABI).at(address);
lendEthContract.Aborted().watch ( (err, response) => {
		var resp = response.args;
		var index  = window.activeContracts.findIndex(x => x.contractAddress === address);
		window.activeContracts.splice(index, 1);
		try {document.getElementById("active1").innerHTML = activeContracts[0].contractAddress;}
		catch (e) {document.getElementById("active1").innerHTML = ""}
		try {document.getElementById("active2").innerHTML = activeContracts[1].contractAddress;}
		catch (e) {document.getElementById("active2").innerHTML = ""}
		try {document.getElementById("active3").innerHTML = activeContracts[2].contractAddress;}
		catch (e) {document.getElementById("active3").innerHTML = ""}
		try {document.getElementById("active4").innerHTML = activeContracts[3].contractAddress;}
		catch (e) {document.getElementById("active4").innerHTML = ""}
		try {document.getElementById("active5").innerHTML = activeContracts[4].contractAddress;}
		catch (e) {document.getElementById("active5").innerHTML = ""}
		try {document.getElementById("active6").innerHTML = activeContracts[5].contractAddress;}
		catch (e) {document.getElementById("active6").innerHTML = ""}
		try {document.getElementById("active7").innerHTML = activeContracts[6].contractAddress;}
		catch (e) {document.getElementById("active7").innerHTML = ""}
		try {document.getElementById("active8").innerHTML = activeContracts[7].contractAddress;}
		catch (e) {document.getElementById("active8").innerHTML = ""}
		});
		}

///listen for eth contract activations
function setuplockedethwatch(watchedaddress) {
var address = watchedaddress;
var ethcontractABI = [
	{
		"constant": false,
		"inputs": [],
		"name": "abort",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "bondRelease",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "takeOffer",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"name": "contractOfferer",
				"type": "address"
			},
			{
				"name": "fixRate",
				"type": "uint256"
			},
			{
				"name": "termDuration",
				"type": "uint256"
			}
		],
		"payable": true,
		"stateMutability": "payable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "Aborted",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "contractAddress",
				"type": "address"
			},
			{
				"indexed": false,
				"name": "rate",
				"type": "uint256"
			},
			{
				"indexed": false,
				"name": "token",
				"type": "address"
			}
		],
		"name": "OfferConfirmed",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [],
		"name": "termEnded",
		"type": "event"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "divided",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "duration",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "interest",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "lockTime",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "offerer",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "rate",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "state",
		"outputs": [
			{
				"name": "",
				"type": "uint8"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "taker",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "value",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	}
];
var lendEthContract = web3.eth.contract(ethcontractABI).at(address);
lendEthContract.OfferConfirmed().watch ( (err, response) => {
		window.recentEthContract = response.args;
		window.lockedContracts.push(window.recentEthContract);
		var index  = window.activeContracts.findIndex(x => x.contractAddress === address);
		window.activeContracts.splice(index, 1);
		setupreleasedeth(address);
		try {document.getElementById("contract1").innerHTML = window.lockedContracts[0].contractAddress;}
		catch (e) {}
		try {document.getElementById("contractrate1").innerHTML = 'Rate: ' + window.lockedContracts[0].rate; + '%'}
		catch (e) {}
		try {document.getElementById("contractsize1").innerHTML = window.lockedContracts[0].size; + ' ETH'}
		catch (e) {}
		try {document.getElementById("contract2").innerHTML = window.lockedContracts[1].contractAddress;}
		catch (e) {}
		try {document.getElementById("contractrate2").innerHTML = 'Rate: ' + window.lockedContracts[1].rate; + '%'}
		catch (e) {}
		try {document.getElementById("contractsize2").innerHTML = window.lockedContracts[1].size; + ' ETH'}
		catch (e) {}
		try {document.getElementById("contract3").innerHTML = window.lockedContracts[2].contractAddress;}
		catch (e) {}
		try {document.getElementById("contractrate3").innerHTML = 'Rate: ' + window.lockedContracts[2].rate; + '%'}
		catch (e) {}
		try {document.getElementById("contractsize3").innerHTML = window.lockedContracts[2].size; + ' ETH'}
		catch (e) {}
		try {document.getElementById("active1").innerHTML = activeContracts[0].contractAddress;}
		catch (e) {document.getElementById("active1").innerHTML = ""}
		try {document.getElementById("active2").innerHTML = activeContracts[1].contractAddress;}
		catch (e) {document.getElementById("active2").innerHTML = ""}
		try {document.getElementById("active3").innerHTML = activeContracts[2].contractAddress;}
		catch (e) {document.getElementById("active3").innerHTML = ""}
		try {document.getElementById("active4").innerHTML = activeContracts[3].contractAddress;}
		catch (e) {document.getElementById("active4").innerHTML = ""}
		try {document.getElementById("active5").innerHTML = activeContracts[4].contractAddress;}
		catch (e) {document.getElementById("active5").innerHTML = ""}
		try {document.getElementById("active6").innerHTML = activeContracts[5].contractAddress;}
		catch (e) {document.getElementById("active6").innerHTML = ""}
		try {document.getElementById("active7").innerHTML = activeContracts[6].contractAddress;}
		catch (e) {document.getElementById("active7").innerHTML = ""}
		try {document.getElementById("active8").innerHTML = activeContracts[7].contractAddress;}
		catch (e) {document.getElementById("active8").innerHTML = ""}
		});
		}


///listen for new contract creations @ offercontract address
var address = '0x472f284e02f93ffc99FD10f89D718ba4472AC5d0';
var offerContract = web3.eth.contract(ABI).at(address);
window.activeContracts = [];
window.lockedContracts = [];
offerContract.newLendEthContract().watch ( (err, response) => {  //set up listener for the AuctionClosed Event
        //once the event has been detected, take actions as desired
		window.recentcontract = response.args;
		window.recentcontract.type = 'ETH';
		window.activeContracts.push(window.recentcontract);
		setuplockedethwatch(recentcontract.contractAddress);
		setupabortwatcher(recentcontract.contractAddress);
		try {document.getElementById("active1").innerHTML = activeContracts[0].contractAddress;}
		catch (e) {}
		try {document.getElementById("active2").innerHTML = activeContracts[1].contractAddress;}
		catch (e) {}
		try {document.getElementById("active3").innerHTML = activeContracts[2].contractAddress;}
		catch (e) {}
		try {document.getElementById("active4").innerHTML = activeContracts[3].contractAddress;}
		catch (e) {}
		try {document.getElementById("active5").innerHTML = activeContracts[4].contractAddress;}
		catch (e) {}
		try {document.getElementById("active6").innerHTML = activeContracts[5].contractAddress;}
		catch (e) {}
		try {document.getElementById("active7").innerHTML = activeContracts[6].contractAddress;}
		catch (e) {}
		try {document.getElementById("active8").innerHTML = activeContracts[7].contractAddress;}
		catch (e) {}
		

      });

/// load offer when address is selected
function loadcontract(loadedContractAddress) {
contractarraylength = window.activeContracts.length;
for (var i = 0; i < contractarraylength; i++) {
if (window.activeContracts[i].contractAddress == loadedContractAddress) {
var loadedContract = activeContracts[i];
var type = loadedContract.type;
if (type == 'ETH'){
document.getElementById("contractaddress").innerHTML = type;
window.currentcontractstake = Number((((loadedContract.value/31622400)*loadedContract.duration)*(loadedContract.rate/100))+1100000000000)
document.getElementById("selectedoffer").innerHTML = loadedContract.contractAddress;  
document.getElementById("contractrate").innerHTML = loadedContract.rate + ' ' + '% APR';  
document.getElementById("contractduration").innerHTML = loadedContract.duration + ' ' + '(Sec)';  
document.getElementById("contractsupplied").innerHTML = ((loadedContract.value)/1000000000000000000) + ' ' + 'ETH';  
document.getElementById("contractstake").innerHTML = (((((loadedContract.value)/1000000000000000000)/31622400)*loadedContract.duration)*(loadedContract.rate/100)).toFixed(6) + ' ' + 'ETH'
}
}
}
}
/// Authorize ERC contract deposit
function ercAuthorize (type) {
window.tokentype = type;
erc20ABI = [
    {
        "constant": true,
        "inputs": [],
        "name": "name",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_spender",
                "type": "address"
            },
            {
                "name": "_value",
                "type": "uint256"
            }
        ],
        "name": "approve",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "totalSupply",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_from",
                "type": "address"
            },
            {
                "name": "_to",
                "type": "address"
            },
            {
                "name": "_value",
                "type": "uint256"
            }
        ],
        "name": "transferFrom",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "decimals",
        "outputs": [
            {
                "name": "",
                "type": "uint8"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "_owner",
                "type": "address"
            }
        ],
        "name": "balanceOf",
        "outputs": [
            {
                "name": "balance",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [],
        "name": "symbol",
        "outputs": [
            {
                "name": "",
                "type": "string"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "constant": false,
        "inputs": [
            {
                "name": "_to",
                "type": "address"
            },
            {
                "name": "_value",
                "type": "uint256"
            }
        ],
        "name": "transfer",
        "outputs": [
            {
                "name": "",
                "type": "bool"
            }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "constant": true,
        "inputs": [
            {
                "name": "_owner",
                "type": "address"
            },
            {
                "name": "_spender",
                "type": "address"
            }
        ],
        "name": "allowance",
        "outputs": [
            {
                "name": "",
                "type": "uint256"
            }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
    },
    {
        "payable": true,
        "stateMutability": "payable",
        "type": "fallback"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "owner",
                "type": "address"
            },
            {
                "indexed": true,
                "name": "spender",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "value",
                "type": "uint256"
            }
        ],
        "name": "Approval",
        "type": "event"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": true,
                "name": "from",
                "type": "address"
            },
            {
                "indexed": true,
                "name": "to",
                "type": "address"
            },
            {
                "indexed": false,
                "name": "value",
                "type": "uint256"
            }
        ],
        "name": "Transfer",
        "type": "event"
    }
];
if (type == 'SUPPLY'){
var tokenaddress = '0xad6d458402f60fd3bd25163575031acdce07538d';
var tokencontract = web3.eth.contract(erc20ABI).at(tokenaddress);
var currentaddress = document.getElementById("useraddress").innerHTML;
tokencontract.approve('0x472f284e02f93ffc99FD10f89D718ba4472AC5d0', '1000000000000000000000000000000', function (error, result) {console.log(result)});
}
else if (type == 'TAKE'){
var tokenaddress = document.getElementById("contractAddress").innerHTML.value;
var tokencontract = web3.eth.contract(erc20ABI).at(tokenaddress);
var currentaddress = document.getElementById("useraddress").innerHTML;
tokencontract.approve('0x472f284e02f93ffc99FD10f89D718ba4472AC5d0', '1000000000000000000000000000000', function (error, result) {console.log(result)});
}
}
/// check for metamask address changes
var account = web3.eth.accounts[0];
var accountInterval = setInterval(function() {
  if (web3.eth.accounts[0] !== account) {
    account = web3.eth.accounts[0];
    document.getElementById("useraddress").innerHTML = account;
  }
}, 100);
    </script>
  <!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>